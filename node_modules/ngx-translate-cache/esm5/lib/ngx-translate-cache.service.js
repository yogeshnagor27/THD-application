import { __decorate, __param } from "tslib";
import { Inject, Injectable, InjectionToken } from '@angular/core';
export var CacheMechanism;
(function (CacheMechanism) {
    CacheMechanism.LocalStorage = 'LocalStorage';
    CacheMechanism.Cookie = 'Cookie';
})(CacheMechanism || (CacheMechanism = {}));
export var CACHE_NAME = new InjectionToken('CACHE_NAME');
export var CACHE_MECHANISM = new InjectionToken('CACHE_MECHANISM');
export var COOKIE_EXPIRY = new InjectionToken('COOKIE_EXPIRY');
var DEFAULT_CACHE_NAME = 'lang';
var DEFAULT_CACHE_MECHANISM = CacheMechanism.LocalStorage;
var DEFAULT_COOKIE_EXPIRY = 720;
var TranslateCacheSettings = /** @class */ (function () {
    function TranslateCacheSettings(cacheName, cacheMechanism, cookieExpiry) {
        if (cacheName === void 0) { cacheName = DEFAULT_CACHE_NAME; }
        if (cacheMechanism === void 0) { cacheMechanism = DEFAULT_CACHE_MECHANISM; }
        if (cookieExpiry === void 0) { cookieExpiry = DEFAULT_COOKIE_EXPIRY; }
        this.cacheName = cacheName;
        this.cacheMechanism = cacheMechanism;
        this.cookieExpiry = cookieExpiry;
    }
    TranslateCacheSettings.ctorParameters = function () { return [
        { type: String, decorators: [{ type: Inject, args: [CACHE_NAME,] }] },
        { type: String, decorators: [{ type: Inject, args: [CACHE_MECHANISM,] }] },
        { type: Number, decorators: [{ type: Inject, args: [COOKIE_EXPIRY,] }] }
    ]; };
    TranslateCacheSettings = __decorate([
        Injectable(),
        __param(0, Inject(CACHE_NAME)),
        __param(1, Inject(CACHE_MECHANISM)),
        __param(2, Inject(COOKIE_EXPIRY))
    ], TranslateCacheSettings);
    return TranslateCacheSettings;
}());
export { TranslateCacheSettings };
/* Not injectable */
var TranslateCacheService = /** @class */ (function () {
    function TranslateCacheService(translateService, translateCacheSettings) {
        this.translateService = translateService;
        this.translateCacheSettings = translateCacheSettings;
    }
    TranslateCacheService.prototype.init = function () {
        var _this = this;
        this.translateService.onLangChange
            .subscribe(function (event) {
            if (_this.translateCacheSettings.cacheMechanism === CacheMechanism.LocalStorage) {
                return _this.cacheWithLocalStorage(event.lang);
            }
            if (_this.translateCacheSettings.cacheMechanism === CacheMechanism.Cookie) {
                return _this.cacheWithCookies(event.lang);
            }
        });
        var currentLang = this.getCachedLanguage() || this.translateService.getBrowserLang();
        if (currentLang) {
            this.translateService.use(currentLang);
        }
    };
    TranslateCacheService.prototype.getCachedLanguage = function () {
        if (this.translateCacheSettings.cacheMechanism === CacheMechanism.LocalStorage) {
            return this.cacheWithLocalStorage();
        }
        if (this.translateCacheSettings.cacheMechanism === CacheMechanism.Cookie) {
            return this.cacheWithCookies();
        }
    };
    TranslateCacheService.prototype.cacheWithLocalStorage = function (value) {
        if (typeof window === 'undefined' || typeof window.localStorage === 'undefined') {
            return;
        }
        try {
            if (value) {
                window.localStorage.setItem(this.translateCacheSettings.cacheName, value);
                return;
            }
            return window.localStorage.getItem(this.translateCacheSettings.cacheName);
        }
        catch (e) {
            return;
        }
    };
    TranslateCacheService.prototype.cacheWithCookies = function (value) {
        if (typeof document === 'undefined' || typeof document.cookie === 'undefined') {
            return;
        }
        try {
            var name_1 = encodeURIComponent(this.translateCacheSettings.cacheName);
            if (value) {
                var date = new Date();
                date.setTime(date.getTime() + this.translateCacheSettings.cookieExpiry * 3600000);
                document.cookie = name_1 + "=" + encodeURIComponent(value) + ";expires=" + date.toUTCString();
                return;
            }
            var regexp = new RegExp('(?:^' + name_1 + '|;\\s*' + name_1 + ')=(.*?)(?:;|$)', 'g');
            var result = regexp.exec(document.cookie);
            return decodeURIComponent(result[1]);
        }
        catch (e) {
            return;
        }
    };
    return TranslateCacheService;
}());
export { TranslateCacheService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRyYW5zbGF0ZS1jYWNoZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXRyYW5zbGF0ZS1jYWNoZS8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtdHJhbnNsYXRlLWNhY2hlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUk3RSxNQUFNLEtBQVcsY0FBYyxDQUc5QjtBQUhELFdBQWlCLGNBQWM7SUFDaEIsMkJBQVksR0FBdUIsY0FBYyxDQUFDO0lBQ2xELHFCQUFNLEdBQXVCLFFBQVEsQ0FBQztBQUNyRCxDQUFDLEVBSGdCLGNBQWMsS0FBZCxjQUFjLFFBRzlCO0FBRUQsTUFBTSxDQUFDLElBQU0sVUFBVSxHQUFHLElBQUksY0FBYyxDQUFTLFlBQVksQ0FBQyxDQUFDO0FBQ25FLE1BQU0sQ0FBQyxJQUFNLGVBQWUsR0FBRyxJQUFJLGNBQWMsQ0FBUyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzdFLE1BQU0sQ0FBQyxJQUFNLGFBQWEsR0FBRyxJQUFJLGNBQWMsQ0FBUyxlQUFlLENBQUMsQ0FBQztBQVN6RSxJQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQztBQUNsQyxJQUFNLHVCQUF1QixHQUFHLGNBQWMsQ0FBQyxZQUFZLENBQUM7QUFDNUQsSUFBTSxxQkFBcUIsR0FBRyxHQUFHLENBQUM7QUFHbEM7SUFDRSxnQ0FBdUMsU0FBc0MsRUFDakMsY0FBZ0QsRUFDbEQsWUFBNEM7UUFGL0MsMEJBQUEsRUFBQSw4QkFBc0M7UUFDakMsK0JBQUEsRUFBQSx3Q0FBZ0Q7UUFDbEQsNkJBQUEsRUFBQSxvQ0FBNEM7UUFGL0MsY0FBUyxHQUFULFNBQVMsQ0FBNkI7UUFDakMsbUJBQWMsR0FBZCxjQUFjLENBQWtDO1FBQ2xELGlCQUFZLEdBQVosWUFBWSxDQUFnQztJQUFHLENBQUM7OzZDQUY3RSxNQUFNLFNBQUMsVUFBVTs2Q0FDakIs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T0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsQ0FBQztnQkFDbEYsUUFBUSxDQUFDLE1BQU0sR0FBTSxNQUFJLFNBQUksa0JBQWtCLENBQUMsS0FBSyxDQUFDLGlCQUFZLElBQUksQ0FBQyxXQUFXLEVBQUksQ0FBQztnQkFFdkYsT0FBTzthQUNSO1lBQ0QsSUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQUksR0FBRyxRQUFRLEdBQUcsTUFBSSxHQUFHLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ25GLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRTVDLE9BQU8sa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEM7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUFFLE9BQU87U0FBRTtJQUN6QixDQUFDO0lBQ0gsNEJBQUM7QUFBRCxDQUFDLEFBN0RELElBNkRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBJbmplY3Rpb25Ub2tlbiwgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UsIFRyYW5zbGF0aW9uQ2hhbmdlRXZlbnQgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcblxuZXhwb3J0IHR5cGUgQ2FjaGVNZWNoYW5pc21UeXBlID0gJ0xvY2FsU3RvcmFnZScgfCAnQ29va2llJztcbmV4cG9ydCBuYW1lc3BhY2UgQ2FjaGVNZWNoYW5pc20ge1xuICBleHBvcnQgY29uc3QgTG9jYWxTdG9yYWdlOiBDYWNoZU1lY2hhbmlzbVR5cGUgPSAnTG9jYWxTdG9yYWdlJztcbiAgZXhwb3J0IGNvbnN0IENvb2tpZTogQ2FjaGVNZWNoYW5pc21UeXBlID0gJ0Nvb2tpZSc7XG59XG5cbmV4cG9ydCBjb25zdCBDQUNIRV9OQU1FID0gbmV3IEluamVjdGlvblRva2VuPHN0cmluZz4oJ0NBQ0hFX05BTUUnKTtcbmV4cG9ydCBjb25zdCBDQUNIRV9NRUNIQU5JU00gPSBuZXcgSW5qZWN0aW9uVG9rZW48c3RyaW5nPignQ0FDSEVfTUVDSEFOSVNNJyk7XG5leHBvcnQgY29uc3QgQ09PS0lFX0VYUElSWSA9IG5ldyBJbmplY3Rpb25Ub2tlbjxzdHJpbmc+KCdDT09LSUVfRVhQSVJZJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNsYXRlQ2FjaGVDb25maWcge1xuICBjYWNoZVNlcnZpY2U6IFByb3ZpZGVyO1xuICBjYWNoZU5hbWU/OiBzdHJpbmc7XG4gIGNhY2hlTWVjaGFuaXNtPzogQ2FjaGVNZWNoYW5pc21UeXBlO1xuICBjb29raWVFeHBpcnk/OiBudW1iZXI7XG59XG5cbmNvbnN0IERFRkFVTFRfQ0FDSEVfTkFNRSA9ICdsYW5nJztcbmNvbnN0IERFRkFVTFRfQ0FDSEVfTUVDSEFOSVNNID0gQ2FjaGVNZWNoYW5pc20uTG9jYWxTdG9yYWdlO1xuY29uc3QgREVGQVVMVF9DT09LSUVfRVhQSVJZID0gNzIwO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlQ2FjaGVTZXR0aW5ncyB7XG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoQ0FDSEVfTkFNRSkgcHVibGljIGNhY2hlTmFtZTogc3RyaW5nID0gREVGQVVMVF9DQUNIRV9OQU1FLFxuICAgICAgICAgICAgICBASW5qZWN0KENBQ0hFX01FQ0hBTklTTSkgcHVibGljIGNhY2hlTWVjaGFuaXNtOiBzdHJpbmcgPSBERUZBVUxUX0NBQ0hFX01FQ0hBTklTTSxcbiAgICAgICAgICAgICAgQEluamVjdChDT09LSUVfRVhQSVJZKSBwdWJsaWMgY29va2llRXhwaXJ5OiBudW1iZXIgPSBERUZBVUxUX0NPT0tJRV9FWFBJUlkpIHt9XG59XG5cbi8qIE5vdCBpbmplY3RhYmxlICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlQ2FjaGVTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgICBwcml2YXRlIHRyYW5zbGF0ZUNhY2hlU2V0dGluZ3M6IFRyYW5zbGF0ZUNhY2hlU2V0dGluZ3MpIHt9XG5cbiAgcHVibGljIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLm9uTGFuZ0NoYW5nZVxuICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IFRyYW5zbGF0aW9uQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNsYXRlQ2FjaGVTZXR0aW5ncy5jYWNoZU1lY2hhbmlzbSA9PT0gQ2FjaGVNZWNoYW5pc20uTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVXaXRoTG9jYWxTdG9yYWdlKGV2ZW50LmxhbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudHJhbnNsYXRlQ2FjaGVTZXR0aW5ncy5jYWNoZU1lY2hhbmlzbSA9PT0gQ2FjaGVNZWNoYW5pc20uQ29va2llKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVXaXRoQ29va2llcyhldmVudC5sYW5nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjb25zdCBjdXJyZW50TGFuZyA9IHRoaXMuZ2V0Q2FjaGVkTGFuZ3VhZ2UoKSB8fCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuZ2V0QnJvd3NlckxhbmcoKTtcblxuICAgIGlmIChjdXJyZW50TGFuZykgeyB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UudXNlKGN1cnJlbnRMYW5nKTsgfVxuICB9XG5cbiAgcHVibGljIGdldENhY2hlZExhbmd1YWdlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMudHJhbnNsYXRlQ2FjaGVTZXR0aW5ncy5jYWNoZU1lY2hhbmlzbSA9PT0gQ2FjaGVNZWNoYW5pc20uTG9jYWxTdG9yYWdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZVdpdGhMb2NhbFN0b3JhZ2UoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50cmFuc2xhdGVDYWNoZVNldHRpbmdzLmNhY2hlTWVjaGFuaXNtID09PSBDYWNoZU1lY2hhbmlzbS5Db29raWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlV2l0aENvb2tpZXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhY2hlV2l0aExvY2FsU3RvcmFnZSh2YWx1ZT86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJykgeyByZXR1cm47IH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAodmFsdWUpIHsgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMudHJhbnNsYXRlQ2FjaGVTZXR0aW5ncy5jYWNoZU5hbWUsIHZhbHVlKTsgcmV0dXJuOyB9XG5cbiAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy50cmFuc2xhdGVDYWNoZVNldHRpbmdzLmNhY2hlTmFtZSk7XG4gICAgfSBjYXRjaCAoZSkgeyByZXR1cm47IH1cbiAgfVxuXG4gIHByaXZhdGUgY2FjaGVXaXRoQ29va2llcyh2YWx1ZT86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGRvY3VtZW50LmNvb2tpZSA9PT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuOyB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnRyYW5zbGF0ZUNhY2hlU2V0dGluZ3MuY2FjaGVOYW1lKTtcblxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIHRoaXMudHJhbnNsYXRlQ2FjaGVTZXR0aW5ncy5jb29raWVFeHBpcnkgKiAzNjAwMDAwKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gYCR7bmFtZX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfTtleHBpcmVzPSR7ZGF0ZS50b1VUQ1N0cmluZygpfWA7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVnZXhwID0gbmV3IFJlZ0V4cCgnKD86XicgKyBuYW1lICsgJ3w7XFxcXHMqJyArIG5hbWUgKyAnKT0oLio/KSg/Ojt8JCknLCAnZycpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcmVnZXhwLmV4ZWMoZG9jdW1lbnQuY29va2llKTtcblxuICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRbMV0pO1xuICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuOyB9XG4gIH1cbn1cbiJdfQ==